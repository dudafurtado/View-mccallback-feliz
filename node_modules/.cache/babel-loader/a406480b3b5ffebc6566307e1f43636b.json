{"ast":null,"code":"var _jsxFileName = \"/media/dudapantera/OS/DUDA/Programa\\xE7\\xE3o/Cubos Academy Desenvolvimento FullStack/FRONT-END/Desafio 4 - FRONTEND/front-integral-m05-desafio-t05/src/components/Lists/ClientsListItems/index.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport './style.css';\nimport useUser from \"../../../hooks/useUser\";\nimport { listClientsService } from '../../../services/clientService';\nimport { cpfMask, phoneMask } from \"../../../utils/Mask\";\nimport { getItem } from '../../../utils/Storage';\nimport ArrowsOrganizeIcon from '../../../assets/arrowclients.svg';\nimport NewDebtIcon from '../../../assets/new-debt.svg';\nimport NoResults from '../../../assets/noresults.svg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ClientsListItems() {\n  _s();\n\n  const {\n    setCurrentClient,\n    openModalClient,\n    setOpenModalCreateDebt,\n    clientsList,\n    setClientsList,\n    searchClients,\n    setSearchClients\n  } = useUser();\n  const [sort, setSort] = useState(true);\n  const navigate = useNavigate();\n  const token = getItem('token');\n  useEffect(() => {\n    if (!token) {\n      navigate('/login');\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n  useEffect(() => {\n    loadClients();\n    setSearchClients(\"\"); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [openModalClient]);\n\n  function handleClientDetail(id, name) {\n    setCurrentClient({\n      id: id,\n      name: name\n    });\n    navigate(`/clients/detail/${id}`);\n  }\n\n  async function loadClients() {\n    try {\n      if (searchClients) {\n        const {\n          data,\n          ok\n        } = await listClientsService(token, searchClients);\n\n        if (!ok) {\n          return setClientsList([]);\n        }\n\n        setClientsList(data);\n      } else {\n        const {\n          data,\n          ok\n        } = await listClientsService(token);\n\n        if (!ok) {\n          return toast.warning(data);\n        }\n\n        setClientsList(data);\n      }\n    } catch (error) {\n      return toast.error(error.message);\n    }\n  }\n\n  function handleModalCreateDebt(id, clientName) {\n    setCurrentClient({\n      id: id,\n      name: clientName\n    });\n    setOpenModalCreateDebt(true);\n  }\n\n  async function handleSort() {\n    const localClients = clientsList;\n\n    if (sort) {\n      localClients.sort((a, b) => a.name > b.name ? 1 : -1);\n      setSort(false);\n    } else {\n      localClients.sort((a, b) => a.name < b.name ? 1 : -1);\n      setSort(true);\n    }\n\n    setClientsList(localClients);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: \"ClientsListItems\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"IndexClientsList\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ClientIndicator Sort\",\n        onClick: () => handleSort(),\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: ArrowsOrganizeIcon,\n          alt: \"Organizador atrav\\xE9s do nome do cliente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Cliente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"CPF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"E-mail\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Telefone\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Criar Cobran\\xE7a\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), clientsList.length !== 0 ? clientsList.map(eachClient => /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"EachClient\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ClientListName\",\n        onClick: () => handleClientDetail(eachClient.id),\n        children: eachClient.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ClientListCPF\",\n        onClick: () => handleClientDetail(eachClient.id),\n        children: eachClient.cpf && cpfMask(eachClient.cpf)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ClientListEmail\",\n        onClick: () => handleClientDetail(eachClient.id),\n        children: eachClient.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ClientListPhone\",\n        onClick: () => handleClientDetail(eachClient.id),\n        children: eachClient.phone && phoneMask(eachClient.phone)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: eachClient.status === 'Em dia' ? 'ClientListStatus Ok' : 'ClientListStatus Owe',\n        onClick: () => handleClientDetail(eachClient.id),\n        children: eachClient.status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#modal\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"CreateDebtButton\",\n          onClick: () => handleModalCreateDebt(eachClient.id, eachClient.name),\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: NewDebtIcon,\n            alt: \"Icone indicando a possibilidade de criar uma cobran\\xE7a\",\n            className: \"NewDebtIcon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"DebtWord\",\n            children: \"Cobran\\xE7a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this)]\n    }, eachClient.cpf, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }, this)) : /*#__PURE__*/_jsxDEV(\"img\", {\n      src: NoResults,\n      alt: \"No results\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 14\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ClientsListItems, \"tyO781GLlGMCHL0CTUHB+7u+8r0=\", false, function () {\n  return [useUser, useNavigate];\n});\n\n_c = ClientsListItems;\nexport default ClientsListItems;\n\nvar _c;\n\n$RefreshReg$(_c, \"ClientsListItems\");","map":{"version":3,"names":["useEffect","useState","useNavigate","toast","useUser","listClientsService","cpfMask","phoneMask","getItem","ArrowsOrganizeIcon","NewDebtIcon","NoResults","ClientsListItems","setCurrentClient","openModalClient","setOpenModalCreateDebt","clientsList","setClientsList","searchClients","setSearchClients","sort","setSort","navigate","token","loadClients","handleClientDetail","id","name","data","ok","warning","error","message","handleModalCreateDebt","clientName","handleSort","localClients","a","b","length","map","eachClient","cpf","email","phone","status"],"sources":["/media/dudapantera/OS/DUDA/Programação/Cubos Academy Desenvolvimento FullStack/FRONT-END/Desafio 4 - FRONTEND/front-integral-m05-desafio-t05/src/components/Lists/ClientsListItems/index.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport './style.css';\n\nimport useUser from \"../../../hooks/useUser\";\nimport { listClientsService } from '../../../services/clientService';\nimport { cpfMask, phoneMask } from \"../../../utils/Mask\";\nimport { getItem } from '../../../utils/Storage';\n\nimport ArrowsOrganizeIcon from '../../../assets/arrowclients.svg';\nimport NewDebtIcon from '../../../assets/new-debt.svg';\nimport NoResults from '../../../assets/noresults.svg';\n\n\nfunction ClientsListItems() {\n  const { setCurrentClient, openModalClient, setOpenModalCreateDebt, clientsList, setClientsList, searchClients, setSearchClients } = useUser()\n  const [sort, setSort] = useState(true)\n\n  const navigate = useNavigate();\n\n  const token = getItem('token');\n\n  useEffect(() => {\n    if (!token) {\n      navigate('/login');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    loadClients();\n    setSearchClients(\"\")\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [openModalClient])\n\n  function handleClientDetail(id, name) {\n    setCurrentClient({ id: id, name: name });\n    navigate(`/clients/detail/${id}`);\n  }\n\n  async function loadClients() {\n    try {\n      if (searchClients) {\n        const { data, ok } = await listClientsService(token, searchClients);\n        if (!ok) {\n          return setClientsList([])\n        }\n        setClientsList(data);\n      } else {\n        const { data, ok } = await listClientsService(token);\n        if (!ok) {\n          return toast.warning(data);\n        }\n        setClientsList(data);\n      }\n    } catch (error) {\n      return toast.error(error.message);\n    }\n  }\n\n  function handleModalCreateDebt(id, clientName) {\n    setCurrentClient({ id: id, name: clientName })\n    setOpenModalCreateDebt(true)\n  }\n\n  async function handleSort() {\n    const localClients = clientsList;\n    if (sort) {\n      localClients.sort((a, b) => a.name > b.name ? 1 : -1);\n      setSort(false)\n    } else {\n      localClients.sort((a, b) => a.name < b.name ? 1 : -1);\n      setSort(true)\n    }\n    setClientsList(localClients)\n  }\n\n  return (\n    <article className='ClientsListItems'>\n      <header className='IndexClientsList'>\n        <div\n          className='ClientIndicator Sort'\n          onClick={() => handleSort()}\n        >\n          <img\n            src={ArrowsOrganizeIcon}\n            alt=\"Organizador através do nome do cliente\"\n          />\n          <span>Cliente</span>\n        </div>\n        <span>CPF</span>\n        <span>E-mail</span>\n        <span>Telefone</span>\n        <span>Status</span>\n        <span>Criar Cobrança</span>\n      </header>\n      {clientsList.length !== 0 ?\n        clientsList.map((eachClient) => (\n          <section\n            className='EachClient'\n            key={eachClient.cpf}\n          >\n            <span className='ClientListName'\n              onClick={() => handleClientDetail(eachClient.id)}\n            >{eachClient.name}</span>\n            <span className='ClientListCPF'\n              onClick={() => handleClientDetail(eachClient.id)}\n            >{eachClient.cpf && cpfMask(eachClient.cpf)}</span>\n            <span className='ClientListEmail'\n              onClick={() => handleClientDetail(eachClient.id)}\n            >{eachClient.email}</span>\n            <span className='ClientListPhone'\n              onClick={() => handleClientDetail(eachClient.id)}\n            >{eachClient.phone && phoneMask(eachClient.phone)}</span>\n            <span\n              className={eachClient.status === 'Em dia' ?\n                'ClientListStatus Ok' : 'ClientListStatus Owe'}\n              onClick={() => handleClientDetail(eachClient.id)}\n            >\n              {eachClient.status}\n            </span>\n            <a href='#modal'>\n              <button\n                className='CreateDebtButton'\n                onClick={() => handleModalCreateDebt(eachClient.id, eachClient.name)}\n              >\n                <img\n                  src={NewDebtIcon}\n                  alt=\"Icone indicando a possibilidade de criar uma cobrança\"\n                  className='NewDebtIcon'\n                />\n                <span className='DebtWord'>Cobrança</span>\n              </button>\n            </a>\n          </section>\n        )) : <img src={NoResults} alt=\"No results\" />\n      }\n    </article>\n  )\n}\n\nexport default ClientsListItems;"],"mappings":"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"},"metadata":{},"sourceType":"module"}