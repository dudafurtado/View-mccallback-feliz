{"ast":null,"code":"var _jsxFileName = \"/media/dudapantera/OS/DUDA/Programa\\xE7\\xE3o/Cubos Academy Desenvolvimento FullStack/FRONT-END/Desafio 4 - FRONTEND/front-integral-m05-desafio-t05/src/components/Forms/LoginForm/index.jsx\",\n    _s = $RefreshSig$();\n\nimport './style.css';\nimport { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { keepNameOfUser, loginService } from '../../../services/userService';\nimport { loginUser } from '../../../validations/userSchema';\nimport { getItem, setItem } from '../../../utils/Storage';\nimport { emailLogin, passwordLogin } from '../../../utils/InputsValues';\nimport { actionLogin } from '../../../utils/ButtonsValues';\nimport InputEmail from '../../Inputs/InputEmail';\nimport InputPassword from '../../Inputs/InputPassword';\nimport ButtonAction from '../../CmptsRegister/ButtonAction';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LoginForm() {\n  _s();\n\n  const navigate = useNavigate();\n  const [emailForm, setEmailForm] = useState('');\n  const [passwordForm, setPasswordForm] = useState('');\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const space = passwordForm.contains('');\n\n    if (space) {\n      return toast.error('Não é permitido ');\n    }\n\n    try {\n      await loginUser.validate({\n        emailForm,\n        passwordForm\n      });\n    } catch (error) {\n      return toast.error(error.message);\n    }\n\n    handleLogin();\n  }\n\n  async function handleLogin() {\n    try {\n      const nameStorage = getItem('name');\n\n      if (!nameStorage) {\n        const {\n          data,\n          ok\n        } = await keepNameOfUser({\n          email: emailForm\n        });\n\n        if (!ok) {\n          return toast.error(data);\n        }\n\n        setItem('name', data);\n      }\n\n      const {\n        data,\n        ok\n      } = await loginService({\n        email: emailForm,\n        password: passwordForm\n      });\n\n      if (!ok) {\n        return toast.error(data);\n      }\n\n      setItem('token', data.token);\n      toast.success('Login realizado com sucesso!');\n      handleClearForm();\n      return setTimeout(() => {\n        navigate('/home');\n      }, 1100);\n    } catch (error) {\n      return toast.error(error.message);\n    }\n  }\n\n  function handleClearForm() {\n    setEmailForm('');\n    setPasswordForm('');\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: \"LoginForm\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"TitleForm\",\n      children: \"Fa\\xE7a seu login!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      action: \"submit\",\n      onSubmit: e => handleSubmit(e),\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"BoxInputOne\",\n        children: /*#__PURE__*/_jsxDEV(InputEmail, {\n          label: emailLogin.label,\n          placeholder: emailLogin.placeholder,\n          name: emailLogin.name,\n          value: emailForm,\n          action: setEmailForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        children: /*#__PURE__*/_jsxDEV(InputPassword, {\n          label: passwordLogin.label,\n          forgotPassword: passwordLogin.forgotPassword,\n          placeholder: passwordLogin.placeholder,\n          name: passwordLogin.name,\n          value: passwordForm,\n          action: setPasswordForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ButtonAction, {\n        button: actionLogin.action\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"QuestionForm\",\n      children: [\"Ainda n\\xE3o possui uma conta?\", /*#__PURE__*/_jsxDEV(Link, {\n        className: \"LinkForm\",\n        to: \"/signup\",\n        children: \"Cadastre-se\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LoginForm, \"R1yauU5bARoQsufEuT8o/oW7MbE=\", false, function () {\n  return [useNavigate];\n});\n\n_c = LoginForm;\nexport default LoginForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["useState","Link","useNavigate","toast","keepNameOfUser","loginService","loginUser","getItem","setItem","emailLogin","passwordLogin","actionLogin","InputEmail","InputPassword","ButtonAction","LoginForm","navigate","emailForm","setEmailForm","passwordForm","setPasswordForm","handleSubmit","e","preventDefault","space","contains","error","validate","message","handleLogin","nameStorage","data","ok","email","password","token","success","handleClearForm","setTimeout","label","placeholder","name","forgotPassword","action"],"sources":["/media/dudapantera/OS/DUDA/Programação/Cubos Academy Desenvolvimento FullStack/FRONT-END/Desafio 4 - FRONTEND/front-integral-m05-desafio-t05/src/components/Forms/LoginForm/index.jsx"],"sourcesContent":["import './style.css';\n\nimport { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nimport { keepNameOfUser, loginService } from '../../../services/userService';\nimport { loginUser } from '../../../validations/userSchema';\nimport { getItem, setItem } from '../../../utils/Storage';\nimport { emailLogin, passwordLogin } from '../../../utils/InputsValues';\nimport { actionLogin } from '../../../utils/ButtonsValues';\n\nimport InputEmail from '../../Inputs/InputEmail';\nimport InputPassword from '../../Inputs/InputPassword';\nimport ButtonAction from '../../CmptsRegister/ButtonAction';\n\nfunction LoginForm() {\n  const navigate = useNavigate();\n\n  const [emailForm, setEmailForm] = useState('');\n  const [passwordForm, setPasswordForm] = useState('');\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    const space = passwordForm.contains('');\n    if (space) {\n      return toast.error('Não é permitido ')\n    }\n\n    try {\n      await loginUser.validate({ emailForm, passwordForm });\n    } catch (error) {\n      return toast.error(error.message);\n    }\n    \n    handleLogin();\n  }\n\n  async function handleLogin() {\n    try {\n      const nameStorage = getItem('name');\n      if (!nameStorage) {\n        const { data, ok } = await keepNameOfUser({\n          email: emailForm\n        })\n\n        if (!ok) {\n          return toast.error(data);\n        }\n\n        setItem('name', data);\n      }\n\n      const { data, ok } = await loginService({\n        email: emailForm,\n        password: passwordForm\n      });\n  \n      if (!ok) {\n        return toast.error(data);\n      }\n      \n      setItem('token', data.token);\n      toast.success('Login realizado com sucesso!');\n\n      handleClearForm();\n\n      return setTimeout(() => {navigate('/home')}, 1100);\n    } catch (error) {\n      return toast.error(error.message);\n    }\n  }\n\n  function handleClearForm() {\n    setEmailForm('');\n    setPasswordForm('');\n  }\n\n  return (\n    <article className=\"LoginForm\">\n      <h2 className='TitleForm'>Faça seu login!</h2>\n      <form action=\"submit\" onSubmit={(e) => handleSubmit(e)}>\n        <section className='BoxInputOne'>\n          <InputEmail \n          label={emailLogin.label} \n          placeholder={emailLogin.placeholder}\n          name={emailLogin.name}\n          value={emailForm}\n          action={setEmailForm} />\n        </section>\n        <section>\n          <InputPassword \n          label={passwordLogin.label} \n          forgotPassword={passwordLogin.forgotPassword}\n          placeholder={passwordLogin.placeholder}\n          name={passwordLogin.name}\n          value={passwordForm}\n          action={setPasswordForm} />\n        </section>\n      <ButtonAction button={actionLogin.action} />\n      </form>\n      <span className='QuestionForm'>\n        Ainda não possui uma conta?  \n         <Link className='LinkForm' to='/signup'>Cadastre-se</Link>\n      </span>\n    </article>\n  );\n}\n\nexport default LoginForm;"],"mappings":";;;AAAA,OAAO,aAAP;AAEA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,IAAT,EAAeC,WAAf,QAAkC,kBAAlC;AACA,SAASC,KAAT,QAAsB,gBAAtB;AAEA,SAASC,cAAT,EAAyBC,YAAzB,QAA6C,+BAA7C;AACA,SAASC,SAAT,QAA0B,iCAA1B;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,wBAAjC;AACA,SAASC,UAAT,EAAqBC,aAArB,QAA0C,6BAA1C;AACA,SAASC,WAAT,QAA4B,8BAA5B;AAEA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AACA,OAAOC,YAAP,MAAyB,kCAAzB;;;AAEA,SAASC,SAAT,GAAqB;EAAA;;EACnB,MAAMC,QAAQ,GAAGd,WAAW,EAA5B;EAEA,MAAM,CAACe,SAAD,EAAYC,YAAZ,IAA4BlB,QAAQ,CAAC,EAAD,CAA1C;EACA,MAAM,CAACmB,YAAD,EAAeC,eAAf,IAAkCpB,QAAQ,CAAC,EAAD,CAAhD;;EAEA,eAAeqB,YAAf,CAA4BC,CAA5B,EAA+B;IAC7BA,CAAC,CAACC,cAAF;IAEA,MAAMC,KAAK,GAAGL,YAAY,CAACM,QAAb,CAAsB,EAAtB,CAAd;;IACA,IAAID,KAAJ,EAAW;MACT,OAAOrB,KAAK,CAACuB,KAAN,CAAY,kBAAZ,CAAP;IACD;;IAED,IAAI;MACF,MAAMpB,SAAS,CAACqB,QAAV,CAAmB;QAAEV,SAAF;QAAaE;MAAb,CAAnB,CAAN;IACD,CAFD,CAEE,OAAOO,KAAP,EAAc;MACd,OAAOvB,KAAK,CAACuB,KAAN,CAAYA,KAAK,CAACE,OAAlB,CAAP;IACD;;IAEDC,WAAW;EACZ;;EAED,eAAeA,WAAf,GAA6B;IAC3B,IAAI;MACF,MAAMC,WAAW,GAAGvB,OAAO,CAAC,MAAD,CAA3B;;MACA,IAAI,CAACuB,WAAL,EAAkB;QAChB,MAAM;UAAEC,IAAF;UAAQC;QAAR,IAAe,MAAM5B,cAAc,CAAC;UACxC6B,KAAK,EAAEhB;QADiC,CAAD,CAAzC;;QAIA,IAAI,CAACe,EAAL,EAAS;UACP,OAAO7B,KAAK,CAACuB,KAAN,CAAYK,IAAZ,CAAP;QACD;;QAEDvB,OAAO,CAAC,MAAD,EAASuB,IAAT,CAAP;MACD;;MAED,MAAM;QAAEA,IAAF;QAAQC;MAAR,IAAe,MAAM3B,YAAY,CAAC;QACtC4B,KAAK,EAAEhB,SAD+B;QAEtCiB,QAAQ,EAAEf;MAF4B,CAAD,CAAvC;;MAKA,IAAI,CAACa,EAAL,EAAS;QACP,OAAO7B,KAAK,CAACuB,KAAN,CAAYK,IAAZ,CAAP;MACD;;MAEDvB,OAAO,CAAC,OAAD,EAAUuB,IAAI,CAACI,KAAf,CAAP;MACAhC,KAAK,CAACiC,OAAN,CAAc,8BAAd;MAEAC,eAAe;MAEf,OAAOC,UAAU,CAAC,MAAM;QAACtB,QAAQ,CAAC,OAAD,CAAR;MAAkB,CAA1B,EAA4B,IAA5B,CAAjB;IACD,CA7BD,CA6BE,OAAOU,KAAP,EAAc;MACd,OAAOvB,KAAK,CAACuB,KAAN,CAAYA,KAAK,CAACE,OAAlB,CAAP;IACD;EACF;;EAED,SAASS,eAAT,GAA2B;IACzBnB,YAAY,CAAC,EAAD,CAAZ;IACAE,eAAe,CAAC,EAAD,CAAf;EACD;;EAED,oBACE;IAAS,SAAS,EAAC,WAAnB;IAAA,wBACE;MAAI,SAAS,EAAC,WAAd;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAEE;MAAM,MAAM,EAAC,QAAb;MAAsB,QAAQ,EAAGE,CAAD,IAAOD,YAAY,CAACC,CAAD,CAAnD;MAAA,wBACE;QAAS,SAAS,EAAC,aAAnB;QAAA,uBACE,QAAC,UAAD;UACA,KAAK,EAAEb,UAAU,CAAC8B,KADlB;UAEA,WAAW,EAAE9B,UAAU,CAAC+B,WAFxB;UAGA,IAAI,EAAE/B,UAAU,CAACgC,IAHjB;UAIA,KAAK,EAAExB,SAJP;UAKA,MAAM,EAAEC;QALR;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QADF,eASE;QAAA,uBACE,QAAC,aAAD;UACA,KAAK,EAAER,aAAa,CAAC6B,KADrB;UAEA,cAAc,EAAE7B,aAAa,CAACgC,cAF9B;UAGA,WAAW,EAAEhC,aAAa,CAAC8B,WAH3B;UAIA,IAAI,EAAE9B,aAAa,CAAC+B,IAJpB;UAKA,KAAK,EAAEtB,YALP;UAMA,MAAM,EAAEC;QANR;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QATF,eAkBA,QAAC,YAAD;QAAc,MAAM,EAAET,WAAW,CAACgC;MAAlC;QAAA;QAAA;QAAA;MAAA,QAlBA;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF,eAsBE;MAAM,SAAS,EAAC,cAAhB;MAAA,0DAEG,QAAC,IAAD;QAAM,SAAS,EAAC,UAAhB;QAA2B,EAAE,EAAC,SAA9B;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAFH;IAAA;MAAA;MAAA;MAAA;IAAA,QAtBF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AA6BD;;GA5FQ5B,S;UACUb,W;;;KADVa,S;AA8FT,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}