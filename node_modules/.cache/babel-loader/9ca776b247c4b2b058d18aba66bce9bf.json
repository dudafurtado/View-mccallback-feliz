{"ast":null,"code":"var _jsxFileName = \"/media/dudapantera/OS/DUDA/Programa\\xE7\\xE3o/Cubos Academy Desenvolvimento FullStack/FRONT-END/Desafio 4 - FRONTEND/front-integral-m05-desafio-t05/src/components/Forms/RegisterForm/index.jsx\",\n    _s = $RefreshSig$();\n\nimport './style.css';\nimport { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { signUpUserStepOne, signUpUserStepTwo } from '../../../validations/userSchema';\nimport { emailExistsForUser, signUpService } from '../../../services/userService';\nimport { setItem, getItem, removeItem } from '../../../utils/Storage';\nimport { nameSignUp, emailSignUp, passwordSignUp, confirmPasswordSignUp } from '../../../utils/InputsValues';\nimport { actionBasicData, actionPassword } from '../../../utils/ButtonsValues';\nimport InputText from '../../Inputs/InputText';\nimport InputEmail from '../../Inputs/InputEmail';\nimport InputPassword from '../../Inputs/InputPassword';\nimport ButtonAction from '../../CmptsRegister/ButtonAction';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction RegisterForm(_ref) {\n  _s();\n\n  let {\n    currentStep,\n    setCurrentStep\n  } = _ref;\n  const [nameForm, setNameForm] = useState('');\n  const [emailForm, setEmailForm] = useState('');\n  const [passwordForm, setpasswordForm] = useState('');\n  const [confirmPasswordForm, setConfirmPasswordForm] = useState('');\n  const basicDataStep = currentStep === 'basicData';\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const space = passwordForm.includes(' ');\n\n    if (space) {\n      return toast.error('Não é permitido fazer o cadastro com espaços na senha');\n    }\n\n    try {\n      if (basicDataStep) {\n        await signUpUserStepOne.validate({\n          nameForm,\n          emailForm\n        });\n      } else {\n        await signUpUserStepTwo.validate({\n          passwordForm,\n          confirmPasswordForm\n        });\n\n        if (passwordForm !== confirmPasswordForm) {\n          return toast.warning('As senhas precisam ser iguais');\n        }\n      }\n\n      handleSignUp();\n    } catch (error) {\n      toast.error(error.message);\n    }\n  }\n\n  async function handleSignUp() {\n    try {\n      if (basicDataStep) {\n        const {\n          data,\n          ok\n        } = await emailExistsForUser({\n          email: emailForm\n        });\n\n        if (!ok) {\n          return toast.error(data);\n        }\n\n        toast.success('Vamos para o próximo passo!');\n        setItem('name', nameForm);\n        setItem('email', emailForm);\n        handleClearForm();\n        setCurrentStep('password');\n      } else {\n        const nameStorage = getItem('name');\n        const emailStorage = getItem('email');\n        const {\n          data,\n          ok\n        } = await signUpService({\n          name: nameStorage,\n          email: emailStorage,\n          password: passwordForm\n        });\n\n        if (!ok) {\n          return toast.error(data);\n        }\n\n        removeItem('email');\n        handleClearForm();\n        setCurrentStep('signUpCompleted');\n      }\n    } catch (error) {\n      return toast.error(error.message);\n    }\n  }\n\n  function handleClearForm() {\n    if (basicDataStep) {\n      setNameForm('');\n      setEmailForm('');\n    } else {\n      setpasswordForm('');\n      setConfirmPasswordForm('');\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: \"RegisterForm\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"TitleForm\",\n      children: basicDataStep ? 'Adicione seus dados' : 'Escolha uma senha'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      action: \"submit\",\n      onSubmit: e => handleSubmit(e),\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"BoxInputOne\",\n        children: basicDataStep ? /*#__PURE__*/_jsxDEV(InputText, {\n          label: nameSignUp.label,\n          placeholder: nameSignUp.placeholder,\n          value: nameForm,\n          action: setNameForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(InputPassword, {\n          label: passwordSignUp.label,\n          forgotPassword: passwordSignUp.forgotPassword,\n          placeholder: passwordSignUp.placeholder,\n          value: passwordForm,\n          action: setpasswordForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        children: basicDataStep ? /*#__PURE__*/_jsxDEV(InputEmail, {\n          label: emailSignUp.label,\n          placeholder: emailSignUp.placeholder,\n          value: emailForm,\n          action: setEmailForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(InputPassword, {\n          label: confirmPasswordSignUp.label,\n          forgotPassword: confirmPasswordSignUp.forgotPassword,\n          placeholder: confirmPasswordSignUp.placeholder,\n          value: confirmPasswordForm,\n          action: setConfirmPasswordForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ButtonAction, {\n        button: basicDataStep ? actionBasicData.action : actionPassword.action\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"QuestionForm\",\n      children: [\"J\\xE1 possui uma conta? Fa\\xE7a seu\", /*#__PURE__*/_jsxDEV(Link, {\n        className: \"LinkForm\",\n        to: \"/login\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n}\n\n_s(RegisterForm, \"d+tbXHEK37HeQz4JeJ82pOcnQQY=\");\n\n_c = RegisterForm;\nexport default RegisterForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"RegisterForm\");","map":{"version":3,"names":["useState","Link","toast","signUpUserStepOne","signUpUserStepTwo","emailExistsForUser","signUpService","setItem","getItem","removeItem","nameSignUp","emailSignUp","passwordSignUp","confirmPasswordSignUp","actionBasicData","actionPassword","InputText","InputEmail","InputPassword","ButtonAction","RegisterForm","currentStep","setCurrentStep","nameForm","setNameForm","emailForm","setEmailForm","passwordForm","setpasswordForm","confirmPasswordForm","setConfirmPasswordForm","basicDataStep","handleSubmit","e","preventDefault","space","includes","error","validate","warning","handleSignUp","message","data","ok","email","success","handleClearForm","nameStorage","emailStorage","name","password","label","placeholder","forgotPassword","action"],"sources":["/media/dudapantera/OS/DUDA/Programação/Cubos Academy Desenvolvimento FullStack/FRONT-END/Desafio 4 - FRONTEND/front-integral-m05-desafio-t05/src/components/Forms/RegisterForm/index.jsx"],"sourcesContent":["import './style.css';\n\nimport { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nimport { signUpUserStepOne, signUpUserStepTwo } from '../../../validations/userSchema';\nimport { emailExistsForUser, signUpService } from '../../../services/userService';\nimport { setItem, getItem, removeItem } from '../../../utils/Storage';\n\nimport { nameSignUp, emailSignUp, passwordSignUp, confirmPasswordSignUp } from '../../../utils/InputsValues';\nimport { actionBasicData, actionPassword } from '../../../utils/ButtonsValues';\n\nimport InputText from '../../Inputs/InputText';\nimport InputEmail from '../../Inputs/InputEmail';\nimport InputPassword from '../../Inputs/InputPassword';\nimport ButtonAction from '../../CmptsRegister/ButtonAction';\n\nfunction RegisterForm({ currentStep, setCurrentStep }) {\n  const [nameForm, setNameForm] = useState('');\n  const [emailForm, setEmailForm] = useState('');\n  const [passwordForm, setpasswordForm] = useState('');\n  const [confirmPasswordForm, setConfirmPasswordForm] = useState('');\n\n  const basicDataStep = currentStep === 'basicData';\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    const space = passwordForm.includes(' ');\n    if (space) {\n      return toast.error('Não é permitido fazer o cadastro com espaços na senha');\n    }\n\n    try {\n      if (basicDataStep) {\n        await signUpUserStepOne.validate({ nameForm, emailForm });\n      } else {\n        await signUpUserStepTwo.validate({ passwordForm, confirmPasswordForm });\n      \n        if (passwordForm !== confirmPasswordForm) {\n          return toast.warning('As senhas precisam ser iguais');\n        }\n      }\n\n      handleSignUp();\n    } catch (error) {\n      toast.error(error.message);\n    }\n  }\n\n  async function handleSignUp() {\n    try {\n      if (basicDataStep) {\n        const { data, ok } = await emailExistsForUser({\n          email: emailForm\n        });\n\n        if (!ok) {\n          return toast.error(data);\n        }\n\n        toast.success('Vamos para o próximo passo!');\n\n        setItem('name', nameForm);\n        setItem('email', emailForm);\n\n        handleClearForm();\n\n        setCurrentStep('password');\n      } else {\n        const nameStorage = getItem('name');\n        const emailStorage = getItem('email');\n\n        const { data, ok } = await signUpService({\n          name: nameStorage,\n          email: emailStorage,\n          password: passwordForm\n        });\n\n        if (!ok) {\n          return toast.error(data);\n        }\n\n        removeItem('email');\n        handleClearForm();\n\n        setCurrentStep('signUpCompleted');\n      }\n    } catch (error) {\n      return toast.error(error.message);\n    }\n  }\n\n  function handleClearForm() {\n    if (basicDataStep) {\n      setNameForm('');\n      setEmailForm('');\n    } else {\n      setpasswordForm('');\n      setConfirmPasswordForm('');\n    }\n  }\n\n  return (\n    <article className=\"RegisterForm\">\n      <h2 className='TitleForm'>\n        {basicDataStep ? 'Adicione seus dados' : 'Escolha uma senha'}\n      </h2>\n      <form action=\"submit\" onSubmit={(e) => handleSubmit(e)}>\n        <section className='BoxInputOne'>\n          {basicDataStep ? \n          <InputText \n          label={nameSignUp.label} \n          placeholder={nameSignUp.placeholder}\n          value={nameForm}\n          action={setNameForm}\n          /> \n          : \n          <InputPassword \n          label={passwordSignUp.label} \n          forgotPassword={passwordSignUp.forgotPassword}\n          placeholder={passwordSignUp.placeholder}\n          value={passwordForm}\n          action={setpasswordForm}\n          />}\n        </section>\n        <section>\n          {basicDataStep ? \n          <InputEmail \n          label={emailSignUp.label} \n          placeholder={emailSignUp.placeholder}\n          value={emailForm}\n          action={setEmailForm} \n          /> \n          : \n          <InputPassword \n          label={confirmPasswordSignUp.label} \n          forgotPassword={confirmPasswordSignUp.forgotPassword}\n          placeholder={confirmPasswordSignUp.placeholder}\n          value={confirmPasswordForm}\n          action={setConfirmPasswordForm}\n          />}\n        </section>\n        <ButtonAction button={basicDataStep ? actionBasicData.action : actionPassword.action} />\n      </form>\n      <span className='QuestionForm'>\n        Já possui uma conta? Faça seu\n        <Link className='LinkForm' to='/login'>Login</Link>\n      </span>\n    </article>\n  );\n}\n\nexport default RegisterForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}